/*!
 * Layzr.js 2.2.2 - A small, fast, and modern library for lazy loading images.
 * Copyright (c) 2016 Michael Cavalea - http://callmecavs.github.io/layzr.js/
 * License: MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Layzr=e()}(this,function(){"use strict";var t=(function(){function t(t){this.value=t}function e(e){function n(t,e){return new Promise(function(n,o){var c={key:t,arg:e,resolve:n,reject:o,next:null};u?u=u.next=c:(i=u=c,r(t,e))})}function r(n,i){try{var u=e[n](i),c=u.value;c instanceof t?Promise.resolve(c.value).then(function(t){r("next",t)},function(t){r("throw",t)}):o(u.done?"return":"normal",u.value)}catch(t){o("throw",t)}}function o(t,e){switch(t){case"return":i.resolve({value:e,done:!0});break;case"throw":i.reject(e);break;default:i.resolve({value:e,done:!1})}i=i.next,i?r(i.key,i.arg):u=null}var i,u;this._invoke=n,"function"!=typeof e.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)},{wrap:function(t){return function(){return new e(t.apply(this,arguments))}},await:function(e){return new t(e)}}}(),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}),e=function(){function e(t,e){return u[t]=u[t]||[],u[t].push(e),this}function n(t,n){return n._once=!0,e(t,n),this}function r(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?u[t].splice(u[t].indexOf(e),1):delete u[t],this}function o(t){for(var e=this,n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];var c=u[t]&&u[t].slice();return c&&c.forEach(function(n){n._once&&r(t,n),n.apply(e,o)}),this}var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u={};return t({},i,{on:e,once:n,off:r,emit:o})},n=function(){function t(){return window.scrollY||window.pageYOffset}function n(){l=t(),r()}function r(){h||(requestAnimationFrame(function(){return a()}),h=!0)}function o(t){return t.getBoundingClientRect().top+l}function i(t){var e=l,n=e+v,r=o(t),i=r+t.offsetHeight,u=p.threshold/100*v;return i>=e-u&&r<=n+u}function u(t){if(w.emit("src:before",t),m&&t.hasAttribute(p.srcset))t.setAttribute("srcset",t.getAttribute(p.srcset));else{var e=y>1&&t.getAttribute(p.retina);t.setAttribute("src",e||t.getAttribute(p.normal))}w.emit("src:after",t),[p.normal,p.retina,p.srcset].forEach(function(e){return t.removeAttribute(e)}),s()}function c(t){var e=t?"addEventListener":"removeEventListener";return["scroll","resize"].forEach(function(t){return window[e](t,n)}),this}function a(){return v=window.innerHeight,d.forEach(function(t){return i(t)&&u(t)}),h=!1,this}function s(){return d=Array.prototype.slice.call(document.querySelectorAll("["+p.normal+"]")),this}var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=t(),h=void 0,d=void 0,v=void 0,p={normal:f.normal||"data-normal",retina:f.retina||"data-retina",srcset:f.srcset||"data-srcset",threshold:f.threshold||0},m=document.body.className.indexOf("srcset")!=-1||"srcset"in document.createElement("img"),y=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI,w=e({handlers:c,check:a,update:s});return w};return n});
